{# @var community \Mobicoop\Bundle\MobicoopBundle\Community\Entity\Community #}
{% extends '@Mobicoop/base.html.twig' %}

{% block title %}Communaut√©
{% endblock %}
{% block stylesheets %}
    {{ encore_entry_link_tags("#{assets_prefix ?? ''}community/showcommunity") }}
{% endblock %}
{% block main %}
    {# @var community \Mobicoop\Bundle\MobicoopBundle\Community\Entity\Community#}
    {% set users= [] %}
    {% set paths= [] %}
    {% for cuser in community.communityUsers %}
        {# @var user \App\User\Entity\User #}
        {% set user= cuser.user %}
        {% set users = users|merge([user]) %}
    {% endfor %}
    {% set defaultPreviewCommunity = 'https://picsum.photos/id/237/600/300' %}
    {% set paths = paths|merge({'community_images':community.images.first |default(defaultPreviewCommunity)}) %}
    {% set searchRoute = 'covoiturage/recherche' %}
    <br/><br/>
    <div class="layout justify-center"
         outlined
         tile>
        <div class="flex xs10">
        <community-display
                :community="{{ community|json_encode(1) }}" :users="{{ users|json_encode(1) }}"
                :paths="{{ paths|json_encode(1) }}"
                :geodata="{{ {'geocompleteuri':geoCompleteUri,  'searchroute':searchRoute}|json_encode }}"
                :user="{{app.user|json_encode}}" ></community-display>
        </section>
        <br/><br/>
    </div>
    </div>
{% endblock %}
{% block javascripts %}
    {{ encore_entry_script_tags("#{assets_prefix ?? ''}community/showcommunity") }}
{% endblock %}
