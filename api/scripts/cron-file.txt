# Copyright (c) 2020, MOBICOOP. All rights reserved.
# This project is dual licensed under AGPL and proprietary licence.
# #######################################
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as
# published by the Free Software Foundation, either version 3 of the
# License, or (at your option) any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.

# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <gnu.org/licenses>.
# #######################################
# Licence MOBICOOP described in the file
# LICENSE
# #######################################

# CRON JOBS 
# All the jobs here are installed using a python script (/scripts/updateCrontab.py)
# Parameters used in the python script : 
# $1 => the php binary path
# $2 => the symfony api console path
# $3 => the environment (dev / test / prod)

# each 5 minutes : link addresses and directions to territories
*/5 * * * *    $1 $2 app:geography:territory-link-batch --env=$3

# each day at 1am : create and send the carpool proofs for the day before
0 1 * * *   $1 $2 app:carpool:proof-batch --env=$3

# each day at 2am : create the payment export
# 0 2 * * *   $1 $2 app:payment:export-batch --env=$3

# each day at 2am : create the carpool items for the payment and/or export
0 2 * * * $1 $2 app:carpool:item-batch --env=$3

# each day at 4am : create the journeys
0 4 * * * $1 $2 app:journey:hydrate --env=$3

# each day at 3am : import events from provider
0 3 * * * $1 $2 app:events:import --env=$3