<?php declare(strict_types=1);

namespace DoctrineMigrations;

use Doctrine\DBAL\Schema\Schema;
use Doctrine\Migrations\AbstractMigration;

/**
 * Auto-generated Migration: Please modify to your needs!
 */
final class Version20200210180100 extends AbstractMigration
{
    public function up(Schema $schema) : void
    {
        // this up() migration is auto-generated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() !== 'mysql', 'Migration can only be executed safely on \'mysql\'.');

        $this->addSql('DELETE FROM role_right;');
        $this->addSql('DELETE FROM user_right;');
        $this->addSql('DELETE FROM uright;');
        $this->addSql('
            INSERT INTO `uright` (`id`, `type`, `name`, `parent_id`, `description`, `object`) VALUES
            (1, 2, \'user_manage\', NULL, \'Manage users\', NULL),
            (2, 2, \'user_car_manage\', NULL, \'Manage users cars\', NULL),
            (3, 2, \'user_address_manage\', NULL, \'Manage users addresses\', NULL),
            (4, 2, \'user_message_manage\', NULL, \'Manage users messages\', NULL),
            (5, 2, \'user_manage_self\', NULL, \'Manage its own profile\', NULL),
            (6, 2, \'user_car_manage_self\', NULL, \'Manage its own cars\', NULL),
            (7, 2, \'user_address_manage_self\', NULL, \'Manage its own addresses\', NULL),
            (8, 2, \'user_message_manage_self\', NULL, \'Manage its own messages\', NULL),
            (9, 2, \'carpool_manage\', NULL, \'Manage carpool data\', NULL),
            (10, 2, \'carpool_manage_self\', NULL, \'Manage its own carpool data\', NULL),
            (11, 2, \'article_manage\', NULL, \'Manage articles\', NULL),
            (12, 2, \'community_manage\', NULL, \'Manage communities\', NULL),
            (13, 2, \'community_manage_self\', NULL, \'Manage its own communities\', NULL),
            (14, 2, \'event_manage\', NULL, \'Manage events\', NULL),
            (15, 2, \'event_manage_self\', NULL, \'Manage its own events\', NULL),
            (16, 2, \'relay_point_manage\', NULL, \'Manage relay points\', NULL),
            (17, 2, \'relay_point_manage_self\', NULL, \'Manage its own relay points\', NULL),
            (18, 2, \'territory_manage\', NULL, \'Manage territories\', NULL),
            (19, 2, \'mass_manage\', NULL, \'Manage mass matching data\', NULL),
            (20, 2, \'permission_manage\', NULL, \'Manage permissions\', NULL),
            (21, 2, \'solidary_manage\', NULL, \'Manage solidary data\', NULL),
            (22, 2, \'mass_communication_manage\', NULL, \'Manage communication campaigns\', NULL),
            (23, 2, \'mass_communication_manage_self\', NULL, \'Manage its own communication campaigns\', NULL),
            (24, 1, \'user_register\', NULL, \'Minimal registration\', NULL),
            (25, 1, \'user_register_full\', NULL, \'Full registration\', NULL),
            (26, 1, \'user_create\', 1, \'Create a user\', NULL),
            (27, 1, \'user_update\', 1, \'Update a user\', NULL),
            (28, 1, \'user_delete\', 1, \'Delete a user\', NULL),
            (29, 1, \'user_password\', 1, \'Change user password\', NULL),
            (30, 1, \'user_car_create\', 2, \'Create a car for a user\', NULL),
            (31, 1, \'user_car_update\', 2, \'Update a car for a user\', NULL),
            (32, 1, \'user_car_delete\', 2, \'Delete a car for a user\', NULL),
            (33, 1, \'user_address_create\', 3, \'Create an address for a user\', NULL),
            (34, 1, \'user_address_update\', 3, \'Update an address for a user\', NULL),
            (35, 1, \'user_address_delete\', 3, \'Delete an address for a user\', NULL),
            (36, 1, \'user_message_read\', 4, \'Read the messages of a user\', NULL),
            (37, 1, \'user_message_delete\', 4, \'Delete the messages of a user\', NULL),
            (38, 1, \'user_update_self\', 5, \'Update its own profile\', \'user\'),
            (39, 1, \'user_delete_self\', 5, \'Delete its own profile\', \'user\'),
            (40, 1, \'user_password_self\', 5, \'Change its own password\', \'user\'),
            (41, 1, \'user_car_create_self\', 6, \'Create a car for itself\', NULL),
            (42, 1, \'user_car_update_self\', 6, \'Update its own car\', \'user\'),
            (43, 1, \'user_car_delete_self\', 6, \'Delete its own car\', \'user\'),
            (44, 1, \'user_address_create_self\', 7, \'Create an address for itself\', NULL),
            (45, 1, \'user_address_update_self\', 7, \'Update its own address\', \'user\'),
            (46, 1, \'user_address_delete_self\', 7, \'Delete its own address\', \'user\'),
            (47, 1, \'user_message_create\', 8, \'Create a message\', NULL),
            (48, 1, \'user_message_read_self\', 8, \'Read its own messages\', \'user\'),
            (49, 1, \'user_message_delete_self\', 8, \'Delete its own messages\', \'user\'),
            (50, 1, \'ad_read\', 9, \'View a user ad\', NULL),
            (51, 1, \'ad_create\', 9, \'Create an ad for a user\', NULL),
            (52, 1, \'ad_update\', 9, \'Update an ad for a user\', NULL),
            (53, 1, \'ad_delete\', 9, \'Delete an ad for a user\', NULL),
            (54, 1, \'ad_search\', NULL, \'Search an ad\', NULL),
            (55, 1, \'ad_create_self\', 10, \'Create its own ad\', NULL),
            (56, 1, \'ad_update_self\', 10, \'Update its own ad\', \'ad\'),
            (57, 1, \'ad_delete_self\', 10, \'Delete its own address\', \'ad\'),
            (58, 1, \'ad_results\', 10, \'View the results of its own ad\', \'ad\'),
            (59, 1, \'article_create\', 11, \'Create an article\', NULL),
            (60, 1, \'article_update\', 11, \'Update an article\', NULL),
            (61, 1, \'article_delete\', 11, \'Delete an article\', NULL),
            (62, 1, \'article_read\', NULL, \'Read an article\', NULL),
            (63, 1, \'community_list\', NULL, \'View the list of communities\', NULL),
            (64, 1, \'community_read\', NULL, \'View a community\', NULL),
            (65, 1, \'community_create\', 12, \'Create a community\', NULL),
            (66, 1, \'community_private_create\', 12, \'Create a private community\', NULL),
            (67, 1, \'community_update\', 12, \'Update a community\', NULL),
            (68, 1, \'community_delete\', 12, \'Delete a community\', NULL),
            (69, 1, \'community_member_accept\', 12, \'Accept a member in a community\', NULL),
            (70, 1, \'community_member_refuse\', 12, \'Refuse a member in a community\', NULL),
            (71, 1, \'community_update_self\', 13, \'Update its own community\', \'community\'),
            (72, 1, \'community_delete_self\', 13, \'Delete its own community\', \'community\'),
            (73, 1, \'community_join\', NULL, \'Join a community\', NULL),
            (74, 1, \'community_join_private\', NULL, \'Join a private community\', NULL),
            (75, 1, \'community_leave\', NULL, \'Leave a community\', NULL),
            (76, 1, \'event_list\', NULL, \'View the list of events\', NULL),
            (77, 1, \'event_read\', NULL, \'View an event\', NULL),
            (78, 1, \'event_create\', NULL, \'Create an event\', NULL),
            (79, 1, \'event_update\', 14, \'Update an event\', NULL),
            (80, 1, \'event_delete\', 14, \'Delete an event\', NULL),
            (81, 1, \'event_update_self\', 15, \'Update its own event\', \'event\'),
            (82, 1, \'event_delete_self\', 15, \'Delete its own event\', \'event\'),
            (83, 1, \'relay_point_read\', NULL, \'View a relay point\', NULL),
            (84, 1, \'relay_point_create\', NULL, \'Create a relay point\', NULL),
            (85, 1, \'relay_point_update\', 16, \'Update a relay point\', NULL),
            (86, 1, \'relay_point_delete\', 16, \'Delete a relay point\', NULL),
            (87, 1, \'relay_point_update_self\', 17, \'Update its own relay point\', \'relaypoint\'),
            (88, 1, \'relay_point_delete_self\', 17, \'Delete its own relay point\', \'relaypoint\'),
            (89, 1, \'relay_point_type_create\', 16, \'Create a relay point type\', NULL),
            (90, 1, \'relay_point_type_update\', 16, \'Update a relay point type\', NULL),
            (91, 1, \'relay_point_type_delete\', 16, \'Delete a relay point type\', NULL),
            (92, 1, \'relay_point_type_update_self\', 17, \'Update its own relay point type\', \'relaypointtype\'),
            (93, 1, \'relay_point_type_delete_self\', 17, \'Delete its own relay point type\', \'relaypointtype\'),
            (94, 1, \'territory_create\', 18, \'Create a territory\', NULL),
            (95, 1, \'territory_update\', 18, \'Update a territory\', NULL),
            (96, 1, \'territory_delete\', 18, \'Delete a territory\', NULL),
            (97, 1, \'mass_create\', 19, \'Create mass matching data\', NULL),
            (98, 1, \'mass_read\', 19, \'Read a mass matching data\', NULL),
            (99, 1, \'mass_delete\', 19, \'Delete mass matching data\', NULL),
            (100, 1, \'role_assign\', 20, \'Assign a role to a user\', NULL),
            (101, 1, \'right_role_assign\', 20, \'Assign a right to a role\', NULL),
            (102, 1, \'right_user_assign\', 20, \'Assign a right to a user\', NULL),
            (103, 1, \'solidary_create\', 21, \'Create a solidary record\', NULL),
            (104, 1, \'solidary_read\', 21, \'Read a solidary record\', NULL),
            (105, 1, \'solidary_update\', 21, \'Update a solidary record\', NULL),
            (106, 1, \'solidary_delete\', 21, \'Delete a solidary record\', NULL),
            (107, 1, \'campaign_read\', 22, \'View a campaign\', NULL),
            (108, 1, \'campaign_create\', 22, \'Create a campaign\', NULL),
            (109, 1, \'campaign_update\', 22, \'Update a campaign\', NULL),
            (110, 1, \'campaign_delete\', 22, \'Delete a campaign\', NULL),
            (111, 1, \'campaign_read_self\', 23, \'View its own campaign\', \'campaign\'),
            (112, 1, \'campaign_update_self\', 23, \'Update its own campaign\', \'campaign\'),
            (113, 1, \'campaign_delete_self\', 23, \'Delete its own campaign\', \'campaign\');
        ');
        $this->addSql('
            INSERT INTO `role_right` (`role_id`, `right_id`) VALUES
            (1, 20),
            (2, 1),
            (2, 2),
            (2, 3),
            (2, 4),
            (2, 9),
            (2, 11),
            (2, 12),
            (2, 14),
            (2, 16),
            (2, 18),
            (2, 21),
            (2, 22),
            (3, 6),
            (3, 7),
            (3, 13),
            (3, 15),
            (3, 17),
            (3, 65),
            (3, 73),
            (3, 74),
            (3, 75),
            (3, 78),
            (3, 84),
            (3, 89),
            (4, 5),
            (4, 8),
            (4, 10),
            (5, 24),
            (5, 25),
            (5, 54),
            (5, 62),
            (5, 63),
            (5, 64),
            (5, 76),
            (5, 77),
            (5, 83),
            (6, 19);
        ');
    }

    public function down(Schema $schema) : void
    {
        // this down() migration is auto-generated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() !== 'mysql', 'Migration can only be executed safely on \'mysql\'.');
    }
}
